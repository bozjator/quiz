<div class="flex flex-col xl:flex-row gap-4 h-full box-border">
  <!-- Left column -->
  <div class="w-full xl:w-1/3 h-48 xl:h-full flex flex-col border-r border-gray-300">
    <!-- Header -->
    <div
      class="p-2 bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-gray-300 flex-shrink-0 font-bold"
    >
      <div class="flex justify-between items-center">
        <div class="font-semibold">Questions</div>
        @if (!isEditMode()) {
          <div class="text-gray-500 dark:text-gray-400 font-normal">
            {{ quizPlayService.stats().correctCount }} /
            {{ quizPlayService.stats().answeredCount }} â€” {{ quizPlayService.stats().percentage }}%
          </div>
        } @else if (questions().length > 0 && questions()[0].id !== '') {
          <app-icon-button [size]="20" [icon]="'add'" (click)="addNewQuestion()" />
        }
      </div>
    </div>
    <!-- Scrollable content -->
    <div class="flex-1 overflow-y-auto p-2">
      <app-questions-list
        [isEditMode]="isEditMode()"
        [questions]="questions()"
        [questionAnswerStates]="quizPlayService.questionAnswerStates()"
        (onSelectQuestionId)="selectQuestion($event)"
        [selectedQuestionId]="selectedQuestionId()"
      ></app-questions-list>
    </div>
  </div>

  <!-- Right column -->
  <div class="flex-1 flex flex-col">
    <!-- Header 
    <div class="p-2 bg-gray-100 flex-shrink-0 font-bold">Right Header</div>-->
    <!-- Scrollable content -->
    <div class="flex-1 overflow-y-auto p-2">
      @let currentQuestion = selectedQuestion();
      @if (currentQuestion) {
        @if (isEditMode()) {
          <div class="max-w-5xl">
            <app-question-form
              [question]="currentQuestion"
              (onQuestionCreated)="loadQuestions($event)"
              (onQuestionUpdated)="loadQuestions($event)"
            ></app-question-form>
          </div>
        } @else {
          <div class="max-w-3xl">
            <app-question-play
              [question]="currentQuestion"
              [state]="quizPlayService.getAnswerState(currentQuestion.id)"
              (stateChange)="
                quizPlayService.saveAnswerState(
                  currentQuestion.id,
                  $event.selectedIds,
                  $event.answered,
                  $event.isCorrect
                )
              "
            ></app-question-play>
          </div>
        }
      } @else {
        <div class="text-gray-500">Please select a question.</div>
      }
    </div>
  </div>
</div>
